{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let ListBoxComponent = class ListBoxComponent {\n  constructor(boxesService) {\n    this.boxesService = boxesService;\n    this.boxes = [];\n    this.selectedBoxes = [];\n    this.orders = [];\n    this.totalPrice = 0;\n    this.boxQuantities = {};\n  }\n  ngOnInit() {\n    this.boxesService.fetchData().subscribe(data => {\n      this.boxes = data['hydra:member'];\n    });\n  }\n  incrementAndDisplay(boxId) {\n    const box = this.boxes.find(b => b.id === boxId);\n    if (box) {\n      this.boxQuantities[boxId] = (this.boxQuantities[boxId] || 0) + 1;\n      const div = document.getElementById('boxName');\n      if (div) {\n        div.innerHTML = '<h1>Cart</h1>';\n        for (const [id, quantity] of Object.entries(this.boxQuantities)) {\n          const selectedBox = this.boxes.find(b => b.id === parseInt(id));\n          if (selectedBox) {\n            div.innerHTML += `${quantity}x ${selectedBox.nom} ${selectedBox.prix * quantity}€<br>`;\n          }\n        }\n      }\n      this.orders.push({\n        boxId: box.id,\n        price: box.prix\n      });\n      console.table(this.orders);\n      // Mettre à jour le prix total\n      this.totalPrice = this.orders.reduce((total, order) => total + order.price, 0);\n      console.log('Prix total:', this.totalPrice);\n      const PrixTotal = document.getElementById('prixTotal');\n      if (PrixTotal) {\n        PrixTotal.innerHTML = \"Le prix total est:\" + this.totalPrice + \"€\";\n      }\n    }\n  }\n  decrementAndDisplay(boxId) {\n    const box = this.boxes.find(b => b.id === boxId);\n    if (box) {\n      if (this.boxQuantities[boxId] && this.boxQuantities[boxId] > 0) {\n        this.boxQuantities[boxId] -= 1;\n        const div = document.getElementById('boxName');\n        if (div) {\n          div.innerHTML = '';\n          for (const [id, quantity] of Object.entries(this.boxQuantities)) {\n            const selectedBox = this.boxes.find(b => b.id === parseInt(id));\n            if (selectedBox && quantity > 0) {\n              div.innerHTML += `${quantity}x ${selectedBox.nom} ${selectedBox.prix * quantity}€<br>`;\n            }\n          }\n        }\n        const orderIndex = this.orders.findIndex(order => order.boxId === box.id);\n        if (orderIndex !== -1) {\n          this.orders.splice(orderIndex, 1);\n        }\n        console.table(this.orders);\n        // Réduire le prix\n        // Mettre à jour le prix total\n        this.totalPrice = this.orders.reduce((total, order) => total + order.price, 0);\n        const PrixTotal = document.getElementById('prixTotal');\n        if (PrixTotal) {\n          PrixTotal.innerHTML = \"Le prix total est:\" + this.totalPrice.toFixed(2) + \"€\";\n        }\n      }\n      if (this.orders.length === 0) {\n        // Supprimer le tableau orders\n        this.orders = [];\n      }\n    }\n  }\n};\nListBoxComponent = __decorate([Component({\n  selector: 'app-list-box',\n  templateUrl: './list-box.component.html',\n  styleUrls: ['./list-box.component.css']\n})], ListBoxComponent);","map":{"version":3,"names":["Component","ListBoxComponent","constructor","boxesService","boxes","selectedBoxes","orders","totalPrice","boxQuantities","ngOnInit","fetchData","subscribe","data","incrementAndDisplay","boxId","box","find","b","id","div","document","getElementById","innerHTML","quantity","Object","entries","selectedBox","parseInt","nom","prix","push","price","console","table","reduce","total","order","log","PrixTotal","decrementAndDisplay","orderIndex","findIndex","splice","toFixed","length","__decorate","selector","templateUrl","styleUrls"],"sources":["/Users/alexandreguedes/Desktop/Zushi/src/app/component/list-box/list-box.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { BoxesService } from 'src/app/Services/boxes.service';\nimport { OnInit } from '@angular/core';\nimport { HttpClientModule } from '@angular/common/http';\n\n@Component({\n  selector: 'app-list-box',\n  templateUrl: './list-box.component.html',\n  styleUrls: ['./list-box.component.css']\n})\nexport class ListBoxComponent implements OnInit {\n  boxes: any = [];\n\n  constructor(private boxesService: BoxesService) { }\n\n  ngOnInit(): void {\n    this.boxesService.fetchData().subscribe((data: any) => {\n      this.boxes = data['hydra:member'];\n    });\n  }\n\n  selectedBoxes: { id: number, price: number }[] = [];\n\n  orders: { boxId: number, price: number }[] = [];\n  totalPrice: number = 0;\n\n  boxQuantities: { [boxId: number]: number } = {};\n\n  incrementAndDisplay(boxId: number): void {\n    const box = this.boxes.find((b: any) => b.id === boxId);\n    if (box) {\n      this.boxQuantities[boxId] = (this.boxQuantities[boxId] || 0) + 1;\n      const div = document.getElementById('boxName');\n      if (div) {\n        div.innerHTML = '<h1>Cart</h1>';\n        for (const [id, quantity] of Object.entries(this.boxQuantities)) {\n          const selectedBox = this.boxes.find((b: any) => b.id === parseInt(id));\n          if (selectedBox) {\n            div.innerHTML += `${quantity}x ${selectedBox.nom} ${selectedBox.prix * quantity}€<br>`;\n          }\n        }\n      }\n\n      this.orders.push({ boxId: box.id, price: box.prix });\n      console.table(this.orders);\n\n      // Mettre à jour le prix total\n      this.totalPrice = this.orders.reduce((total, order) => total + order.price, 0);\n      console.log('Prix total:', this.totalPrice);\n      const PrixTotal = document.getElementById('prixTotal');\n      if (PrixTotal) {\n        PrixTotal.innerHTML = \"Le prix total est:\"  +this.totalPrice + \"€\";\n      }\n    }\n  }\n\n  decrementAndDisplay(boxId: number): void {\n    const box = this.boxes.find((b: any) => b.id === boxId);\n    if (box) {\n      if (this.boxQuantities[boxId] && this.boxQuantities[boxId] > 0) {\n        this.boxQuantities[boxId] -= 1;\n        const div = document.getElementById('boxName');\n        if (div) {\n          div.innerHTML = '';\n          for (const [id, quantity] of Object.entries(this.boxQuantities)) {\n            const selectedBox = this.boxes.find((b: any) => b.id === parseInt(id));\n            if (selectedBox && quantity > 0) {\n              div.innerHTML += `${quantity}x ${selectedBox.nom} ${selectedBox.prix * quantity}€<br>`;\n             \n            }\n          }\n        }\n\n        const orderIndex = this.orders.findIndex((order) => order.boxId === box.id);\n        if (orderIndex !== -1) {\n          this.orders.splice(orderIndex, 1);\n        }\n        console.table(this.orders);\n\n        // Réduire le prix\n\n        // Mettre à jour le prix total\n        this.totalPrice = this.orders.reduce((total, order) => total + order.price, 0);\n        const PrixTotal = document.getElementById('prixTotal');\n        if (PrixTotal) {\n          PrixTotal.innerHTML = \"Le prix total est:\"  + this.totalPrice.toFixed(2) + \"€\";\n        }\n      }\n\n      if (this.orders.length === 0) {\n        // Supprimer le tableau orders\n        this.orders = [];\n      }\n    }\n  }\n    }\n  \n\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAUlC,WAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAG3BC,YAAoBC,YAA0B;IAA1B,KAAAA,YAAY,GAAZA,YAAY;IAFhC,KAAAC,KAAK,GAAQ,EAAE;IAUf,KAAAC,aAAa,GAAoC,EAAE;IAEnD,KAAAC,MAAM,GAAuC,EAAE;IAC/C,KAAAC,UAAU,GAAW,CAAC;IAEtB,KAAAC,aAAa,GAAgC,EAAE;EAbG;EAElDC,QAAQA,CAAA;IACN,IAAI,CAACN,YAAY,CAACO,SAAS,EAAE,CAACC,SAAS,CAAEC,IAAS,IAAI;MACpD,IAAI,CAACR,KAAK,GAAGQ,IAAI,CAAC,cAAc,CAAC;IACnC,CAAC,CAAC;EACJ;EASAC,mBAAmBA,CAACC,KAAa;IAC/B,MAAMC,GAAG,GAAG,IAAI,CAACX,KAAK,CAACY,IAAI,CAAEC,CAAM,IAAKA,CAAC,CAACC,EAAE,KAAKJ,KAAK,CAAC;IACvD,IAAIC,GAAG,EAAE;MACP,IAAI,CAACP,aAAa,CAACM,KAAK,CAAC,GAAG,CAAC,IAAI,CAACN,aAAa,CAACM,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC;MAChE,MAAMK,GAAG,GAAGC,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC;MAC9C,IAAIF,GAAG,EAAE;QACPA,GAAG,CAACG,SAAS,GAAG,eAAe;QAC/B,KAAK,MAAM,CAACJ,EAAE,EAAEK,QAAQ,CAAC,IAAIC,MAAM,CAACC,OAAO,CAAC,IAAI,CAACjB,aAAa,CAAC,EAAE;UAC/D,MAAMkB,WAAW,GAAG,IAAI,CAACtB,KAAK,CAACY,IAAI,CAAEC,CAAM,IAAKA,CAAC,CAACC,EAAE,KAAKS,QAAQ,CAACT,EAAE,CAAC,CAAC;UACtE,IAAIQ,WAAW,EAAE;YACfP,GAAG,CAACG,SAAS,IAAI,GAAGC,QAAQ,KAAKG,WAAW,CAACE,GAAG,IAAIF,WAAW,CAACG,IAAI,GAAGN,QAAQ,OAAO;;;;MAK5F,IAAI,CAACjB,MAAM,CAACwB,IAAI,CAAC;QAAEhB,KAAK,EAAEC,GAAG,CAACG,EAAE;QAAEa,KAAK,EAAEhB,GAAG,CAACc;MAAI,CAAE,CAAC;MACpDG,OAAO,CAACC,KAAK,CAAC,IAAI,CAAC3B,MAAM,CAAC;MAE1B;MACA,IAAI,CAACC,UAAU,GAAG,IAAI,CAACD,MAAM,CAAC4B,MAAM,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAKD,KAAK,GAAGC,KAAK,CAACL,KAAK,EAAE,CAAC,CAAC;MAC9EC,OAAO,CAACK,GAAG,CAAC,aAAa,EAAE,IAAI,CAAC9B,UAAU,CAAC;MAC3C,MAAM+B,SAAS,GAAGlB,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;MACtD,IAAIiB,SAAS,EAAE;QACbA,SAAS,CAAChB,SAAS,GAAG,oBAAoB,GAAG,IAAI,CAACf,UAAU,GAAG,GAAG;;;EAGxE;EAEAgC,mBAAmBA,CAACzB,KAAa;IAC/B,MAAMC,GAAG,GAAG,IAAI,CAACX,KAAK,CAACY,IAAI,CAAEC,CAAM,IAAKA,CAAC,CAACC,EAAE,KAAKJ,KAAK,CAAC;IACvD,IAAIC,GAAG,EAAE;MACP,IAAI,IAAI,CAACP,aAAa,CAACM,KAAK,CAAC,IAAI,IAAI,CAACN,aAAa,CAACM,KAAK,CAAC,GAAG,CAAC,EAAE;QAC9D,IAAI,CAACN,aAAa,CAACM,KAAK,CAAC,IAAI,CAAC;QAC9B,MAAMK,GAAG,GAAGC,QAAQ,CAACC,cAAc,CAAC,SAAS,CAAC;QAC9C,IAAIF,GAAG,EAAE;UACPA,GAAG,CAACG,SAAS,GAAG,EAAE;UAClB,KAAK,MAAM,CAACJ,EAAE,EAAEK,QAAQ,CAAC,IAAIC,MAAM,CAACC,OAAO,CAAC,IAAI,CAACjB,aAAa,CAAC,EAAE;YAC/D,MAAMkB,WAAW,GAAG,IAAI,CAACtB,KAAK,CAACY,IAAI,CAAEC,CAAM,IAAKA,CAAC,CAACC,EAAE,KAAKS,QAAQ,CAACT,EAAE,CAAC,CAAC;YACtE,IAAIQ,WAAW,IAAIH,QAAQ,GAAG,CAAC,EAAE;cAC/BJ,GAAG,CAACG,SAAS,IAAI,GAAGC,QAAQ,KAAKG,WAAW,CAACE,GAAG,IAAIF,WAAW,CAACG,IAAI,GAAGN,QAAQ,OAAO;;;;QAM5F,MAAMiB,UAAU,GAAG,IAAI,CAAClC,MAAM,CAACmC,SAAS,CAAEL,KAAK,IAAKA,KAAK,CAACtB,KAAK,KAAKC,GAAG,CAACG,EAAE,CAAC;QAC3E,IAAIsB,UAAU,KAAK,CAAC,CAAC,EAAE;UACrB,IAAI,CAAClC,MAAM,CAACoC,MAAM,CAACF,UAAU,EAAE,CAAC,CAAC;;QAEnCR,OAAO,CAACC,KAAK,CAAC,IAAI,CAAC3B,MAAM,CAAC;QAE1B;QAEA;QACA,IAAI,CAACC,UAAU,GAAG,IAAI,CAACD,MAAM,CAAC4B,MAAM,CAAC,CAACC,KAAK,EAAEC,KAAK,KAAKD,KAAK,GAAGC,KAAK,CAACL,KAAK,EAAE,CAAC,CAAC;QAC9E,MAAMO,SAAS,GAAGlB,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;QACtD,IAAIiB,SAAS,EAAE;UACbA,SAAS,CAAChB,SAAS,GAAG,oBAAoB,GAAI,IAAI,CAACf,UAAU,CAACoC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG;;;MAIlF,IAAI,IAAI,CAACrC,MAAM,CAACsC,MAAM,KAAK,CAAC,EAAE;QAC5B;QACA,IAAI,CAACtC,MAAM,GAAG,EAAE;;;EAGtB;CACG;AArFQL,gBAAgB,GAAA4C,UAAA,EAL5B7C,SAAS,CAAC;EACT8C,QAAQ,EAAE,cAAc;EACxBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,C,EACW/C,gBAAgB,CAqFxB"},"metadata":{},"sourceType":"module","externalDependencies":[]}